
@{
    ViewBag.Title = "Perfil";
    LetsTalk.Models.MvcUser user = (LetsTalk.Models.MvcUser)HttpContext.Current.User;

    //int idade = DateTime.Now.Year - user.DataNascimento.Year;
    //string[] tags = user.Tags.Split(',');

}

<h2>Perfil</h2>


@model Entity.Usuario


@section PageLevelPluginStyles{
    <link href="~/assets/admin/pages/css/news.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/admin/pages/css/blog.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/bootstrap-modal/css/bootstrap-modal-bs3patch.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/global/plugins/bootstrap-modal/css/bootstrap-modal.css" rel="stylesheet" type="text/css" />
}

<tr>
    <td>
        <a class="btn default" data-target="#stack1" data-toggle="modal">
            Ver perfil
        </a>
    </td>
</tr>
<!-- stackable -->
@{
    DateTime hoje = DateTime.Today;
    DateTime nasc = Model.DataNascimento;

    int idade = hoje.Year - nasc.Year;
    if (hoje.Month < nasc.Month || ((hoje.Month == nasc.Month) && (hoje.Day < nasc.Day)))
    {
        idade--;
    }
    string[] tags = String.IsNullOrWhiteSpace(Model.Tags) ? new string[1] : Model.Tags.Split(',');
}

<div id="stack1" class="modal fade" tabindex="-1" data-focus-on="input:first">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
            <h2 class="modal-title bold"> @Model.Nome, @idade </h2>
        </div>

        <div class="modal-body col-md-12 ">
            <img src="@Model.PathFotoPerfil" class="img-responsive" alt="">
            <div class="row">
                <div class="col-md-12">
                    <p>
                        <h4 class="bold"> @Model.FraseApresentacao </h4>
                    </p>
                </div>

                <hr>
                <div class="col-md-12">
                    <p>
                        <h4> @Model.Descricao </h4>
                    </p>
                </div>

                <hr>
                <div class="col-md-12">
                    <ul class="list-inline blog-tags">
                        <li>
                            @foreach (string tag in tags)
                            {
                                <i class="fa fa-tags"></i>@tag
                            }
                        </li>
                    </ul>
                </div>

            </div>
        </div>
        <div class="modal-footer">
            <button type="button" data-dismiss="modal" class="btn btn-default">Voltar</button>
            <button class="btn blue" data-toggle="modal" href="#stack2">Álbum de Fotos</button>
        </div>
    </div>
</div>

<div id="stack2" class="modal fade" tabindex="-1" data-focus-on="input:first">
    <div id="myCarousel" class="carousel image-carousel slide">
        <div class="carousel-inner">
            @*<div class="item">
                    <img src="@Model.PathFotoPerfil" class="img-responsive" alt="">
                </div>*@
            @{bool ativo = true;}
            @foreach (var diretorio in Model.DiretoriosImagens)
            {
                if (ativo)
                {
                    <div class="item active">
                        <img src="@diretorio.PathRelativo" class="img-responsive" />
                    </div>
                    ativo = false;
                }
                else
                {
                    <div class="item">
                        <img src="@diretorio.PathRelativo" class="img-responsive" />
                    </div>
                }
            }

        </div>
        <!-- Carousel nav -->
        <a class="carousel-control left" href="#myCarousel" data-slide="prev">
            <i class="m-icon-big-swapleft m-icon-white"></i>
        </a>
        <a class="carousel-control right" href="#myCarousel" data-slide="next">
            <i class="m-icon-big-swapright m-icon-white"></i>
        </a>
        <ol class="carousel-indicators">
            @for (int i = 0; i < Model.DiretoriosImagens.Count; i++)
            {
                <li data-target="#myCarousel" data-slide-to="@i" class="active"></li>

            }
        </ol>
    </div>

    <div class="modal-footer">
        <button type="button" data-dismiss="modal" class="btn btn-default">Voltar</button>
    </div>
</div>


@section  PageLevelPlugins
{
    <script src="~/assets/global/plugins/bootstrap-modal/js/bootstrap-modalmanager.js" type="text/javascript"></script>
    <script src="~/assets/global/plugins/bootstrap-modal/js/bootstrap-modal.js" type="text/javascript"></script>
}
@section PageLevelScripts {

    <script src="~/assets/admin/pages/scripts/ui-extended-modals.js"></script>
}
@section JqueryFinal{
    <script>
        jQuery(document).ready(function () {
            Metronic.init(); // init metronic core components
            Layout.init(); // init current layout
            Demo.init(); // init demo features
            // UIExtendedModals.init();
        });
    </script>
}



