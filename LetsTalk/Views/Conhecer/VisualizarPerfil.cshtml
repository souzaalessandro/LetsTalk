
@{
	ViewBag.Title = "Perfil";
	LetsTalk.Models.MvcUser user = (LetsTalk.Models.MvcUser)HttpContext.Current.User;

	//int idade = DateTime.Now.Year - user.DataNascimento.Year;
	//string[] tags = user.Tags.Split(',');

}

<h2>Perfil</h2>


@model Entity.Usuario


@section PageLevelPluginStyles{
	<link href="~/assets/admin/pages/css/news.css" rel="stylesheet" type="text/css" />
	<link href="~/assets/admin/pages/css/blog.css" rel="stylesheet" type="text/css" />
	<link href="~/assets/global/plugins/bootstrap-modal/css/bootstrap-modal-bs3patch.css" rel="stylesheet" type="text/css" />
	<link href="~/assets/global/plugins/bootstrap-modal/css/bootstrap-modal.css" rel="stylesheet" type="text/css" />
}

<tr>
	<td>
		<a class="btn default" data-target="#stack1" data-toggle="modal">
			Ver perfil
		</a>
	</td>
</tr>
<!-- stackable -->
@{
    DateTime hoje = DateTime.Today;
    DateTime nasc = Model.DataNascimento;

    int idade = hoje.Year - nasc.Year;
    if (hoje.Month < nasc.Month || ((hoje.Month == nasc.Month) && (hoje.Day < nasc.Day)))
    {
        idade--;
    }
    string[] tags = String.IsNullOrWhiteSpace(Model.Tags) ? new string[1] : Model.Tags.Split(',');
}


<div id="stack1" class="modal fade" tabindex="-1" data-focus-on="input:first">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
		<h2 class="modal-title bold"> @Model.Nome, @idade </h2>
	</div>

    <div class="modal-body col-md-12 ">
        <img src="@Model.PathFotoPerfil" class="img-responsive" alt="">
        <div class="row">
            <div class="col-md-12">
                <p>
                    <h4 class="bold"> @Model.FraseApresentacao </h4>
                </p>
            </div>

			<hr>
			<div class="col-md-12">
				<p>
					<h4> @Model.Descricao </h4>
				</p>
			</div>

			<hr>
			<div class="col-md-12">
				<ul class="list-inline blog-tags">
					<li>
						@foreach (string tag in tags)
						{
							<i class="fa fa-tags"></i>@tag
						}
					</li>
				</ul>
			</div>

		</div>
	</div>
	<div class="modal-footer">
		<button type="button" data-dismiss="modal" class="btn btn-default">Voltar</button>
		<button class="btn blue" data-toggle="modal" href="#stack2">Álbum de Fotos</button>
	</div>
</div>

<div id="stack2" class="modal fade" tabindex="-1" data-focus-on="input:first">
	<div id="myCarousel" class="carousel image-carousel slide">
		<div class="carousel-inner">

			<div class="item">
				<img src="@Model.PathFotoPerfil" class="img-responsive" alt="">
			</div>
			@foreach (var diretorio in Model.DiretoriosImagens)
			{
				<script>
					$(function (diretorio){
						var tagDiv = $("<div>").addClass("item");
						var tagImg = $("<img>").addClass("img-responsive").attr("src", diretorio);
						tagDiv.append(tagImg);

						return tagDiv;
					});
				</script>
			}

			<div class="item">
				<img src="../../assets/admin/pages/media/gallery/image5.jpg" class="img-responsive" alt="">
			</div>

			<div class="item">
				<img src="../../assets/admin/pages/media/gallery/image2.jpg" class="img-responsive" alt="">
			</div>

			<div class="item">
				<img src="../../assets/admin/pages/media/gallery/image5.jpg" class="img-responsive" alt="">
			</div>

			<div class="item active">
				<img src="../../assets/admin/pages/media/gallery/image1.jpg" class="img-responsive" alt="">
			</div>



		</div>
		<!-- Carousel nav -->
		<a class="carousel-control left" href="#myCarousel" data-slide="prev">
			<i class="m-icon-big-swapleft m-icon-white"></i>
		</a>
		<a class="carousel-control right" href="#myCarousel" data-slide="next">
			<i class="m-icon-big-swapright m-icon-white"></i>
		</a>
		<ol class="carousel-indicators">
			<li data-target="#myCarousel" data-slide-to="0" class="">
			</li>
			<li data-target="#myCarousel" data-slide-to="1" class="">
			</li>
			<li data-target="#myCarousel" data-slide-to="2" class="">
			</li>
			<li data-target="#myCarousel" data-slide-to="3" class="">
			</li>
			<li data-target="#myCarousel" data-slide-to="4" class="active">
			</li>
		</ol>
	</div>




	<div class="modal-footer">
		<button type="button" data-dismiss="modal" class="btn btn-default">Voltar</button>
	</div>
</div>



@section  PageLevelPlugins
{
	<script src="~/assets/global/scripts/metronic.js" type="text/javascript"></script>
	<script src="~/assets/admin/layout3/scripts/layout.js" type="text/javascript"></script>
	<script src="~/assets/admin/layout3/scripts/demo.js" type="text/javascript"></script>
	<script src="~/assets/global/plugins/bootstrap-modal/js/bootstrap-modalmanager.js" type="text/javascript"></script>
	<script src="~/assets/global/plugins/bootstrap-modal/js/bootstrap-modal.js" type="text/javascript"></script>

}
@section PageLevelScripts {

	<script src="~/assets/admin/pages/scripts/ui-extended-modals.js"></script>


}
@section JqueryFinal{
	<script>
		jQuery(document).ready(function () {
			Metronic.init(); // init metronic core components
			Layout.init(); // init current layout
			Demo.init(); // init demo features
			UIExtendedModals.init();
		});
	</script>
}



