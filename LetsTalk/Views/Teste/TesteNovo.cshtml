

<h2>MVC : Profile Image</h2>
@section PageLevelPluginStyles{
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <link href="~/assets/iEdit.css" rel="stylesheet" />
    <script src="~/assets/iEdit.js"></script>
    <link href="~/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.css" rel="stylesheet" type="text/css" />

    <style type="text/css">
        #profilepic {
            display: block;
            position: relative;
            width: 250px;
        }
    </style>
}
@using (Html.BeginForm("Teste", "Teste", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <input type="hidden" name="imgbase64" id="imgbase64" />

    <div class="col-md-6">
        <div class="fileinput fileinput-new" data-provides="fileinput">
            <div class="input-group input-large">
                <span class="input-group-addon btn default btn-file">
                    <span class="fileinput-new">
                        Selecionar foto
                    </span>
                    <span class="fileinput-exists">
                        Alterar
                    </span>
                    <input id="file" accept="image/*" type="file">
                </span>
                <a href="javascript:;" class="input-group-addon btn red fileinput-exists" data-dismiss="fileinput">
                    Remover
                </a>
            </div>
        </div>
        <img id="profilepic" style="display:none" >
        <input type="submit" id="btnUpload" value="Salvar" class="btn purple-customizado" />

    </div>



}
@Html.Raw(TempData["Success"])
@section JqueryFinal{
    <script src="~/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js" type="text/javascript"></script>

    <script>
        $(document).ready(function () {
            $("#file").change(function (e) {
                var img = e.target.files[0];
                document.getElementById("profilepic").style.display = 'block';
                if (!iEdit.open(img, true, function (res) {
                    $("#profilepic").attr("src", res);
                    document.getElementById("imgbase64").value = res;
                })) {
                    alert("Tipo de arquivo inválido");
                }
            });
        });
    </script>
}